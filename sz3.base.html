<!doctype html>
<html>
  <head>
    <!-- #IF(MODERN_BROWSER) -->
    <script>
      var legacy = !history.pushState || !window.Promise || !window.fetch || !String.prototype.includes || !Array.prototype.includes;
      try {
        Function('class test{t(){let e=x=>x;const s=0}}');
      } catch(e) {
        legacy = true;
      }
      if (legacy) {
        location.replace('sz3.legacy.html');
      }
    </script>
    <!-- #ENDIF(MODERN_BROWSER) -->
    <meta charset="utf-8">
    <meta name="theme-color" content="#5f8cb5">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/x-icon" href="favicon.ico" sizes="16x16">
    <link rel="apple-touch-icon" href="images/szbus_192.png">
    <title>苏州公交</title>
    <!-- #IF(LEGACY_BROWSER)
    <script src="js/third_party/babel-polyfill.js"></script>
    <script src="js/third_party/es5-shim.js"></script>
    <script src="js/third_party/es6-shim.js"></script>
    <script src="js/third_party/eventShim.js"></script>
    <script src="js/third_party/fetch.js"></script>
    <script src="js/miscShim.js"></script>
    #ENDIF(LEGACY_BROWSER) -->
    <script>
      var manifest = (
// BEGIN MANIFEST
{
  "sources": ["sz3", "sz4", "wj"],
  "last_update_time": "2018-09-29 10:30:01",
  "data": {
    "sz3": "sz3.json",
    "sz4": "sz4.json",
    "wj": "wj.json"
  },
  "size_hints": {
    "sz3": 183,
    "sz4": 142,
    "wj": 59
  },
  "gzip_ratio_hint": 0.2265,
  "start_date": "2018-08-30",
  "lines": {
    "sz3": ["__+BEGIN_LINES+__","1001","1001E","1001W","100","101","102","102N","108","109","10N","10S","112","118","119","126","142","146","161","166","169","170N","170S","175","178","179","190","190N","190S","19","1","200","200N","200S","202","204","209","218","219","261","262","26","27","27D","2SIP","2SND","3002","301","304","304L","305","307","308","311","311L","312","313","315","317","318","31","321","324","325","32","32Q","331","33","34","34LN","34N","35","360","36","38","406","40E","40W","415","42","441","446","44","45","47","4","501","502","502D","511","513","514","518","521","522","523","526","529","52","53","552","553","557","558","563","56","585","5","602","60","60N","60S","621","622","62","64","65","663","66","67","698","69","69Q","7","810","810E","810W","811","812","813","814","815","816","817","818","819","81","827","82","84","85","865","866","86","871","872","873","875","876","877","878","879","87","89","8","9001","9002","9003","9004","9005","9006","9007","9008","9009","900","900N","900S","9011","902","921","922","923","925","926","928","931","932","933","935","937","949","970","970E","970W","980","980E","980W","9","G10","G11","G12","G2N","G2S","G8","G14","J3","K1","K6","K7","N1","N2","N3","N5","XT","Y1","Y1N","Y1S","Y2","Y3","Y4","Y4L","Y5","Y5N","Y5S","__+END_LINES+__"],
    "sz4": ["__+BEGIN_LINES+__","1001E","1001W","100N","100S","106","106Q","110N","110S","111","116","120E","120W","127","129","132","136","141","150N","150S","152","156","158","162","16","175","176","180N","180S","182","185","206","207","215","238","28","2SIP","2SND","3002","300N","300S","302","303","306","309","316","319","322","326","328","329","332","333","335","336","336Q","338","356","357","360","37","39","3","400E","400W","43","442","443","445","5005","503","504","505","508","509","512","518","51","528","54","557","55","560","58","59","611","612","615","623","627","628","63","691","692","6","801","802","803","804","805","805Q","806","807","808","809","80","80N","80S","810E","810W","811","812","813","814","815","816","817","818","819","81","820","820E","820W","821","822","823","824","825","826","828","82","831","832","833","835","836","837","839","83","84","851","852","853","854","855","856","85","85D","861","862","863","864","865","866","86","871","872","873","875","876","877","878","879","87","881","882","883","88","89","923","9001","9002","9002E","9002W","9003","9004","9005","9005E","9005W","9006","9007","9008","9009","9010","9011","9012","9013","9026","922","925","928","9","931","G6","G7","G14","JLJ","K3","K5","K8","K8Z","N10","N4","N6","N7","N8","N9","SP","SZL","__+END_LINES+__"]
  },
  "line_name_map": {
    "LL": "黎里专线",
    "LH": "临沪专线",
    "SZ": "盛泽专线",
    "TY": "桃源专线",
    "BD": "八都专线",
    "ZZ": "震泽专线",
    "QD": "七都专线",
    "SP": "胜浦专线",
    "JLJ": "津梁街专线",
    "XT": "斜塘专线",
    "SZL": "宋庄路专线",
    "XW": "星湾专线",
    "180S": "180E",
    "180N": "180W",
    "10S": "10E",
    "10N": "10W"
  },
  "line_name_prefix_map": {
    "Y": "游 ",
    "K": ["快线 ", " 号"],
    "J": "假日专线 ",
    "N": "夜 ",
    "G": ["高峰 ", " 号"],
    "L": ["临时 ", " 号"]
  },
  "line_name_suffix_map": {
    "N": "北线",
    "S": "南线",
    "E": "东线",
    "W": "西线",
    "Q": "区间",
    "Z": "支线",
    "L": "长线",
    "D": "大站车",
    "G": "高峰",
    "LN": "长线北",
    "SIP": "园区",
    "SND": "市公交"
  },
  "line_name_suffix_order": [
    "E", "W",
    "S", "N",
    "Q", "L", "D", "Z"
  ],
  "unrelated_lines": [
    "2SIP", "2SND", "K8Z", "69", "69Q", "106", "106Q"
  ],
  "archives": {
    "sz3": {
      "path": "archive/sz3/",
      "start_date": "2016-11-23",
      "end_date": "2018-08-31",
      "lengths": {
        "2016-11": 145591,
        "2016-12": 455012,
        "2017-01": 299516,
        "2017-02": 183998,
        "2017-03": 474636,
        "2017-04": 252009,
        "2017-05": 413524,
        "2017-06": 564033,
        "2017-07": 581499,
        "2017-08": 601732,
        "2017-09": 586103,
        "2017-10": 601508,
        "2017-11": 591923,
        "2017-12": 685229,
        "2018-01": 647435,
        "2018-02": 598271,
        "2018-03": 650013,
        "2018-04": 705964,
        "2018-05": 774923,
        "2018-06": 744064,
        "2018-07": 795096,
        "2018-08": 795365
      }
    },
    "sz4": {
      "path": "archive/sz4/",
      "start_date": "2017-04-15",
      "end_date": "2018-08-31",
      "lengths": {
        "2017-04": 94727,
        "2017-05": 164103,
        "2017-06": 155364,
        "2017-07": 191409,
        "2017-08": 377723,
        "2017-09": 469502,
        "2017-10": 482273,
        "2017-11": 495497,
        "2017-12": 516358,
        "2018-01": 532198,
        "2018-02": 476503,
        "2018-03": 544753,
        "2018-04": 569378,
        "2018-05": 607290,
        "2018-06": 600431,
        "2018-07": 618020,
        "2018-08": 620462
      }
    },
    "wj": {
      "path": "archive/wj/",
      "start_date": "2018-03-15",
      "end_date": "2018-08-31",
      "lengths": {
        "2018-03": 140006,
        "2018-04": 244506,
        "2018-05": 273738,
        "2018-06": 268533,
        "2018-07": 275633,
        "2018-08": 276919
      }
    }
  }
}
// END MANIFEST
      );
    </script>
    <style>
      body {
        font-size: 12pt;
      }

      #cellDetails {
        position: absolute;
        border: black solid 2px;
        padding: 8px;
        background-color: #f0e5a6;
        white-space: nowrap;
      }

      #progress {
        margin-left: 3em;
        margin-right: 3em;
        border: black 3px solid;
      }

      #progressbar {
        background-color: #0000ff;
        height: 1.2em;
        width: 0;
      }
      
      #progress_text {
        position: absolute;
        left: 0;
        right: 0;
        text-align: center;
        white-space: nowrap;
      }

      #offline_prompt {
        background-color: #ff9999;
        border: red 4px solid;
        text-align: center;
        font-weight: bold;
      }

      #content table {
        border-spacing: 0;
      }

      #content th {
        white-space: nowrap;
        margin-left: 0.3ex;
        margin-right: 0.3ex;
      }

      .busid_range_begin {
      }

      .busid_odd_range_element {
        background-color: #f0f080;
      }

      .busid_even_range_element {
        background-color: #c8f9f9;
      }

      .busid_range_end {
      }

      .line_view_bus_item {
        height: 100%;
        display: inline-block;
        text-align: center;
      }

      .line_legend_item {
        height: 1em;
        width: 2em;
        display: inline-block;
        margin-left: 2.5em;
      }
    </style>
    <!-- #IF(MODERN_BROWSER) -->
    <script src="js/buses.min.js" data-embedded></script>
    <!-- #ENDIF(MODERN_BROWSER) -->
    <!-- #IF(LEGACY_BROWSER)
    <script src="js/buses.legacy.min.js"></script>
    #ENDIF(LEGACY_BROWSER) -->
  </head>
  <body>
    <div style="margin-bottom: 1em">
      选择线路：<select id="lineChooser"></select>
      <label><input type="checkbox" id="compare">+ 比较</label>
      <span style="margin-left: 0.6em">
        <input type="date" id="startDate">
        ~
        <input type="date" id="endDate">
      </span>
      <span style="margin-left: 1.2em">
        寻找车辆：<input type="text" id="bus_query" size="20">
        <span id="bus_count_container" style="display:none">
          （共
          <span id="bus_count"></span>
          台）
        </span>
        <select id="resultList"></select>
        <button id="findDetails">
          搜索
        </button>
      </span>
      <label><input type="checkbox" id="disableInfotip">关闭提示</label>
      <span style="margin-left: 1.2em;display:none" id="last_update_container">
        最后更新时间：<span id="last_update_time"></span>
      </span>
    </div>
    <div id="progress">
      <span id="progress_text">正在加载，请稍候……</span>
      <div id="progressbar"></div>
    </div>
    <div id="offline_prompt" style="display:none">
      您目前处于离线状态，下方的数据可能不是最新的。
    </div>
    <div id="legend"></div>
    <div id="content"></div>
    <div id="cellDetails" style="display:none">
      日期：<span id="cellDate"></span><br>
      <span id="cellLineContainer" style="display:none">
        线路：<span id="cellLine"></span><br>
      </span>
      自编号：<span id="cellBusId"></span><br>
      车牌号：<span id="cellLicenseId"></span>
    </div>
  </body>
</html>
